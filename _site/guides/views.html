<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Scalatra Views</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/assets/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="/assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Project name</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <h1 id='views'>Views</h1>

<p>Scalatra can render views in three main ways.</p>

<ol>
<li>Inline HTML</li>

<li>Using Scalate directly</li>

<li>Using ScalateSupport helpers, with a bit more &#8220;magic&#8221;</li>
</ol>

<h3 id='inline_html'>Inline HTML</h3>

<p>The simplest method of rendering a view is by using inline HTML:</p>

<p>{pygmentize:: scala} def get(&#8221;/&#8221;) { contentType=&#8221;text/html&#8221;</p>
<html>
  <head><title>Test</title></head>
  <body>Test Body for {uri("/")}</body>
  </html>
<p>} {pygmentize}</p>

<p>Note the use of the curly braces on the <code>{uri(&quot;/&quot;)}</code> part of the inlined view. This tells Scalatra to render Scala code.</p>
<a class='btn btn-large btn-danger' data-content='And here&apos;s some amazing content. It&apos;s very engaging. right?' data-original-title='A Title' href='#' id='foo' rel='popover'>Click to toggle popover</a><script type='text/javascript'>$('#foo').popover()</script>
<h3 id='scalate'>Scalate</h3>

<p>Scalatra can use the incredibly powerful templating engine, <a href='http://scalate.fusesource.org/documentation/user-guide.html'>Scalate</a>. It is designed to be a thin interface for frameworks that want to support multiple template engines.</p>

<p>Some of Scalate&#8217;s all-star features include:</p>

<ul>
<li>Custom template evaluation scopes / bindings</li>

<li>Ability to pass locals to template evaluation</li>

<li>Support for passing a block to template evaluation for &#8220;yield&#8221;</li>

<li>Backtraces with correct filenames and line numbers</li>

<li>Template file caching and reloading</li>
</ul>

<p>Scalate includes support for some of the best engines available, such as <a href='http://scalate.fusesource.org/documentation/ssp-reference.html'>SSP</a>, <a href='http://scalate.fusesource.org/documentation/scaml-reference.html'>SCAML</a>, <a href='http://scalate.fusesource.org/documentation/mustache.html'>Mustache</a> and <a href='http://scalate.fusesource.org/documentation/jade.html'>Jade</a>.</p>

<p>All you need to get started is <code>Scalate</code>, which is included in Scalatra. Views by default look in the <code>views</code> directory in your application root.</p>

<p>There are two ways to use Scalate. Both of them require you to extend your servlet with <code>ScalateSupport</code>: {pygmentize:: scala} class YourServlet extends ScalatraServlet with ScalateSupport { // your class here } {pygmentize}</p>

<h3 id='using_scalate_directly'>Using Scalate directly</h3>

<p>Scalate can be called directly, using the <code>templateEngine.layout(&quot;templateName&quot;)</code> method, like this:</p>

<p>{pygmentize:: scala} get(&#8221;/&#8221;) { templateEngine.layout(&#8220;index.ssp&#8221;) // renders webapp/index.ssp // OR look in a sub-directory</p>

<p>templateEngine.layout(&#8220;/dogs/index.ssp&#8221;) // would instead render webapp/dogs/index.ssp } {pygmentize}</p>

<p>When using Scalate directly, Scalatra will look for your template files in the <code>webapp</code> folder of your application (which is found under <code>src/main/</code> in the project tree).</p>

<p>Another default convention of Scalatra is the layout, which automatically looks for a <code>webapp/layout/default.xx</code> template file to render before loading any other views (where <code>xx</code> is a Scalate template suffix type). If you&#8217;re using <code>SSP</code>, your <code>webapp/layout/default.ssp</code> would look something like this:</p>

<p>{pygmentize:: html} &lt;%@ var yield: String %&gt; &lt;html&gt; <head>..</head> &lt;body&gt; &lt;%= yield %&gt; &lt;/body&gt; &lt;/html&gt; {pygmentize}</p>

<h3 id='scalatesupport_helpers'>ScalateSupport helpers</h3>

<p>The second way of using Scalate is to use Scalatra&#8217;s ScalateSupport helpers, which are a bit more &#8220;magic&#8221; than calling Scalate directly.</p>

<p>Basic usage: {pygmentize:: scala} def get(&#8221;/&#8221;) { contentType=&#8221;text/html&#8221;</p>

<p>layoutTemplate(&#8220;/WEB-INF/views/index.ssp&#8221;) } {pygmentize}</p>

<p>When using <code>layoutTemplate</code>, you <em>must</em> prefix your view paths with a relative <code>/</code> character. So, <code>layoutTemplate(&quot;/WEB-INF/views/foo.ssp&quot;)</code> is good, <code>layoutTemplate(&quot;WEB-INF/views/foo.ssp)</code> will fail.</p>

<p>Rendering with a different layout: {pygmentize:: scala} def get(&#8221;/&#8221;) { contentType=&#8221;text/html&#8221;</p>

<p>layoutTemplate(&#8220;/WEB-INF/views/index.ssp&#8221;, &#8220;layout&#8221; -&gt; &#8220;/WEB-INF/layouts/app.ssp&#8221;) } {pygmentize}</p>

<p>Each possible kind of Scalate template (mustache, scaml, jade, ssp) has a corresponding helper which can be used to find the template file, without a suffix, and without the <code>WEB-INF/views</code> part of the path. The above example can be written as:</p>

<p>{pygmentize:: scala} def get(&#8221;/&#8221;) { contentType=&#8221;text/html&#8221;</p>

<p>ssp(&#8220;/index&#8221;, &#8220;layout&#8221; -&gt; &#8220;WEB-INF/layouts/app.ssp&#8221;) } {pygmentize}</p>

<p>When using the scalate helper methods, it is not required to having a leading <code>/</code>, so <code>ssp(&quot;index&quot;)</code> would work just as well as <code>ssp(&quot;/index&quot;)</code>.</p>

<h3 id='passing_parameters_to_templates'>Passing parameters to templates</h3>

<p>Parameters may be passed to your templates using a Seq(String, Any) after the path to the template file. The simplest example might look like this:</p>

<p>{pygmentize:: scala} def get(&#8221;/&#8221;) { contentType=&#8221;text/html&#8221;</p>

<p>layoutTemplate(&#8220;/WEB-INF/views/index.ssp&#8221;, &#8220;foo&#8221; -&gt; &#8220;uno&#8221;, &#8220;bar&#8221; -&gt; &#8220;dos&#8221;) } {pygmentize}</p>

<p>Putting it all together, in a scaml example (alternatively use mustache, ssp, or jade): {pygmentize:: scala} def get(&#8221;/&#8221;) { contentType=&#8221;text/html&#8221;</p>

<p>scaml(&#8220;/index&#8221;, &#8220;layout&#8221; -&gt; &#8220;WEB-INF/layouts/app.scaml&#8221;, &#8220;foo&#8221; -&gt; &#8220;uno&#8221;, &#8220;bar&#8221; -&gt; &#8220;dos&#8221;) } {pygmentize}</p>

<h3 id='layouts'>Layouts</h3>

<p>The <code>layout</code> key is somewhat special, as it&#8217;s used by scalate to identify the layout file, which wraps a standard layout around the output for the current action.</p>

<p>If you want, you can set off your <code>layout</code> parameter from the others, perhaps by doing something like this (in jade this time):</p>

<p>{pygmentize:: scala} def get(&#8221;/&#8221;) { contentType=&#8221;text/html&#8221;</p>

<p>jade(&#8220;/index&#8221;,(&#8220;layout&#8221; -&gt; &#8220;WEB-INF/layouts/app.jade&#8221;), &#8220;foo&#8221; -&gt; &#8220;uno&#8221;, &#8220;bar&#8221; -&gt; &#8220;dos&#8221;) } {pygmentize}</p>

<h4 id='default_layouts'>Default layouts</h4>

<p>Scalatra sets a default layout at <code>WEB-INF/layouts/default.xx</code> (where xx is one of the scalate template types). If you are using ssp, for instance, and you put a default.ssp file in WEB-INF/layouts/default.ssp, it will automatically be used. In this case, you can simply call <code>ssp(&quot;/index&quot;)</code> and the response will render within the default layout.</p>

<p>To disable a layout for certain templates, Scalate accepts an empty <code>layout</code> attribute:</p>

<p>{pygmentize:: scala} def get(&#8221;/&#8221;) { // This template will render without a layout. jade(&#8220;/index&#8221;, &#8220;layout&#8221; -&gt; &#8221;&#8221;, &#8220;foo&#8221; -&gt; &#8220;uno&#8221;, &#8220;bar&#8221; -&gt; &#8220;dos&#8221;) } {pygmentize}</p>

<p>Your layout file itself might look something like this:</p>

<p>{pygmentize:: html} &lt;%@ var body: String %&gt; &lt;%@ var title: String = &#8220;Some Default Title&#8221; %&gt; <pre class='markdown-html-error' style='border: solid 3px red; background-color: pink'>REXML could not parse this XML/HTML: 
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;${title}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p&gt;layout header goes here...&lt;/p&gt;</pre></p>

<p>${unescape(body)}</p>
<p>layout footer goes here...</p><pre class='markdown-html-error' style='border: solid 3px red; background-color: pink'>REXML could not parse this XML/HTML: 
&lt;/body&gt;</pre><pre class='markdown-html-error' style='border: solid 3px red; background-color: pink'>REXML could not parse this XML/HTML: 
&lt;/html&gt;</pre>
<p>{pygmentize}</p>

<p>In this layout, the template output for the current action will be inserted at the <code>${unescape(body)}</code> directive.</p>

<h3 id='rendering_a_404_page_using_the__handler'>Rendering a 404 page using the <code>notFound</code> handler</h3>

<p>You may need to render some other page when Scalatra can&#8217;t find a route.</p>

<p>Using Scalate directly:</p>

<p>{pygmentize:: scala} class MyScalatraFilter extends ScalatraFilter with ScalateSupport { notFound { // If no route matches, then try to render a Scaml template val templateBase = requestPath match { case s if s.endsWith(&#8221;/&#8221;) =&gt; s + &#8220;index&#8221; case s =&gt; s } val templatePath = &#8220;/WEB-INF/scalate/templates/&#8221; + templateBase + &#8220;.scaml&#8221; servletContext.getResource(templatePath) match { case url: URL =&gt; contentType = &#8220;text/html&#8221; templateEngine.layout(templatePath) case _ =&gt; filterChain.doFilter(request, response) } } } {pygmentize}</p>

<p>Or more simply, using the Scalate helpers:</p>

<p>{pygmentize:: scala} notFound { findTemplate(requestPath) map { path =&gt; contentType = &#8220;text/html&#8221; layoutTemplate(path) } orElse serveStaticResource() getOrElse resourceNotFound() } {pygmentize}</p>

<h3 id='further_reading'>Further reading</h3>

<p>For more information on Scalate, please refer to the <a href='http://scalate.fusesource.org/documentation/user-guide.html'>Scalate User&#8217;s guide</a>. It has advice about layouts, partials, how to DRY up layout code, making Scalate work with your IDE or text editor, and an extensive set of examples.</p>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>
  </body>
</html>